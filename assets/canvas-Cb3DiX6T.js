import{g as H,N as K,u as U,v as Q,R as N,r as p,t as z,d as Z,j as q}from"./index-BeU4XhXP.js";const F=s=>{const{componentCls:n}=s;return{[n]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},_=s=>{const{componentCls:n}=s;return{[n]:{position:"relative",maxWidth:"100%",minHeight:1}}},ee=(s,n)=>{const{prefixCls:r,componentCls:i,gridColumns:t}=s,e={};for(let o=t;o>=0;o--)o===0?(e[`${i}${n}-${o}`]={display:"none"},e[`${i}-push-${o}`]={insetInlineStart:"auto"},e[`${i}-pull-${o}`]={insetInlineEnd:"auto"},e[`${i}${n}-push-${o}`]={insetInlineStart:"auto"},e[`${i}${n}-pull-${o}`]={insetInlineEnd:"auto"},e[`${i}${n}-offset-${o}`]={marginInlineStart:0},e[`${i}${n}-order-${o}`]={order:0}):(e[`${i}${n}-${o}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${o/t*100}%`,maxWidth:`${o/t*100}%`}],e[`${i}${n}-push-${o}`]={insetInlineStart:`${o/t*100}%`},e[`${i}${n}-pull-${o}`]={insetInlineEnd:`${o/t*100}%`},e[`${i}${n}-offset-${o}`]={marginInlineStart:`${o/t*100}%`},e[`${i}${n}-order-${o}`]={order:o});return e[`${i}${n}-flex`]={flex:`var(--${r}${n}-flex)`},e},P=(s,n)=>ee(s,n),te=(s,n,r)=>({[`@media (min-width: ${U(n)})`]:Object.assign({},P(s,r))}),ne=()=>({}),se=()=>({}),ie=H("Grid",F,ne),re=s=>({xs:s.screenXSMin,sm:s.screenSMMin,md:s.screenMDMin,lg:s.screenLGMin,xl:s.screenXLMin,xxl:s.screenXXLMin}),xe=H("Grid",s=>{const n=K(s,{gridColumns:24}),r=re(n);return delete r.xs,[_(n),P(n,""),P(n,"-xs"),Object.keys(r).map(i=>te(n,r[i],`-${i}`)).reduce((i,t)=>Object.assign(Object.assign({},i),t),{})]},se),R=["xxl","xl","lg","md","sm","xs"],oe=s=>({xs:`(max-width: ${s.screenXSMax}px)`,sm:`(min-width: ${s.screenSM}px)`,md:`(min-width: ${s.screenMD}px)`,lg:`(min-width: ${s.screenLG}px)`,xl:`(min-width: ${s.screenXL}px)`,xxl:`(min-width: ${s.screenXXL}px)`}),ae=s=>{const n=s,r=[].concat(R).reverse();return r.forEach((i,t)=>{const e=i.toUpperCase(),o=`screen${e}Min`,f=`screen${e}`;if(!(n[o]<=n[f]))throw new Error(`${o}<=${f} fails : !(${n[o]}<=${n[f]})`);if(t<r.length-1){const y=`screen${e}Max`;if(!(n[f]<=n[y]))throw new Error(`${f}<=${y} fails : !(${n[f]}<=${n[y]})`);const b=`screen${r[t+1].toUpperCase()}Min`;if(!(n[y]<=n[b]))throw new Error(`${y}<=${b} fails : !(${n[y]}<=${n[b]})`)}}),s};function ce(){const[,s]=Q(),n=oe(ae(s));return N.useMemo(()=>{const r=new Map;let i=-1,t={};return{matchHandlers:{},dispatch(e){return t=e,r.forEach(o=>o(t)),r.size>=1},subscribe(e){return r.size||this.register(),i+=1,r.set(i,e),e(t),i},unsubscribe(e){r.delete(e),r.size||this.unregister()},unregister(){Object.keys(n).forEach(e=>{const o=n[e],f=this.matchHandlers[o];f==null||f.mql.removeListener(f==null?void 0:f.listener)}),r.clear()},register(){Object.keys(n).forEach(e=>{const o=n[e],f=M=>{let{matches:b}=M;this.dispatch(Object.assign(Object.assign({},t),{[e]:b}))},y=window.matchMedia(o);y.addListener(f),this.matchHandlers[o]={mql:y,listener:f},f(y)})},responsiveMap:n}},[s])}const le=p.createContext({});var ue=function(s,n){var r={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&n.indexOf(i)<0&&(r[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,i=Object.getOwnPropertySymbols(s);t<i.length;t++)n.indexOf(i[t])<0&&Object.prototype.propertyIsEnumerable.call(s,i[t])&&(r[i[t]]=s[i[t]]);return r};function k(s,n){const[r,i]=p.useState(typeof s=="string"?s:""),t=()=>{if(typeof s=="string"&&i(s),typeof s=="object")for(let e=0;e<R.length;e++){const o=R[e];if(!n[o])continue;const f=s[o];if(f!==void 0){i(f);return}}};return p.useEffect(()=>{t()},[JSON.stringify(s),n]),r}const ge=p.forwardRef((s,n)=>{const{prefixCls:r,justify:i,align:t,className:e,style:o,children:f,gutter:y=0,wrap:M}=s,b=ue(s,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:u,direction:l}=p.useContext(z),[d,a]=p.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[c,h]=p.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),m=k(t,c),g=k(i,c),$=p.useRef(y),x=ce();p.useEffect(()=>{const S=x.subscribe(G=>{h(G);const C=$.current||0;(!Array.isArray(C)&&typeof C=="object"||Array.isArray(C)&&(typeof C[0]=="object"||typeof C[1]=="object"))&&a(G)});return()=>x.unsubscribe(S)},[]);const v=()=>{const S=[void 0,void 0];return(Array.isArray(y)?y:[y,void 0]).forEach((C,Y)=>{if(typeof C=="object")for(let L=0;L<R.length;L++){const X=R[L];if(d[X]&&C[X]!==void 0){S[Y]=C[X];break}}else S[Y]=C}),S},w=u("row",r),[j,V,W]=ie(w),E=v(),D=Z(w,{[`${w}-no-wrap`]:M===!1,[`${w}-${g}`]:g,[`${w}-${m}`]:m,[`${w}-rtl`]:l==="rtl"},e,V,W),T={},I=E[0]!=null&&E[0]>0?E[0]/-2:void 0;I&&(T.marginLeft=I,T.marginRight=I);const[A,O]=E;T.rowGap=O;const J=p.useMemo(()=>({gutter:[A,O],wrap:M}),[A,O,M]);return j(p.createElement(le.Provider,{value:J},p.createElement("div",Object.assign({},b,{className:D,style:Object.assign(Object.assign({},T),o),ref:n}),f)))}),fe={"cesium-wrap":"_cesium-wrap_1v4tr_1"},de="f4fc6e359cfa6ca8132a93326965bfbf",B="74facb0d35b1a253231ceebde1e1d421",he={AMP_KEY:de},me=()=>[[new Cesium.WebMapTileServiceImageryProvider({url:"http://t0.tianditu.com/cva_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cva&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default.jpg&tk="+B,layer:"tdtAnnoLayer",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})],[new Cesium.WebMapTileServiceImageryProvider({url:"http://t0.tianditu.com/cia_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default.jpg&tk="+B,layer:"tdtAnnoLayer",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})]],be=p.memo(({onUpdate:s,onAdded:n,onDelete:r,...i})=>{const[t,e]=p.useState(),o=p.useRef(null);p.useEffect(()=>(f("cesium-container",{animation:!1,timeline:!1,infoBox:!1,fullscreenButton:!1,homeButton:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,vrButton:!1,geocoder:!1,sceneMode:Cesium.SceneMode.SCENE2D}),()=>{var a;t==null||t.destroy(),(a=o.current)==null||a.destroy()}),[]);async function f(...a){t==null||t.destroy();const c=new Cesium.Viewer(...a);e(c),window.viewer=c,M(c),u(c),b(await y(),c),console.log("init",s==null?void 0:s(t))}async function y(){const a=await new Promise((m,g)=>{var $,x;(x=($=navigator.geolocation)==null?void 0:$.getCurrentPosition)==null||x.call($,m,g)}).catch(m=>m),{latitude:c,longitude:h}=(a==null?void 0:a.coords)??{};return a!=null&&a.coords?{latitude:c,longitude:h,height:5e4}:void 0}function M(a){me().forEach(c=>{a.imageryLayers.addImageryProvider(...c)})}function b(a={longitude:118.12181772772028,latitude:24.492788845905654,height:5e4},c=t){const{longitude:h,latitude:m,height:g}=a??{};c==null||c.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(h,m,g),duration:2})}function u(a){const c=new Cesium.ScreenSpaceEventHandler(a.scene.canvas);c.setInputAction(h=>{var g;const m=a.scene.pick(h.position);Cesium.defined(m)&&(m!=null&&m.id)?l(((g=m==null?void 0:m.id)==null?void 0:g.id)??(m==null?void 0:m.id),a):d(h,a)},Cesium.ScreenSpaceEventType.LEFT_CLICK),o.current=c}function l(a,c){c!=null&&c.entities.removeById(a)&&(r==null||r(a))}function d(a,c){const h=c.scene.pickPosition(a==null?void 0:a.position),m=Cesium.Cartographic.fromCartesian(h),g=Cesium.Math.toDegrees(m.longitude),$=Cesium.Math.toDegrees(m.latitude);c.entities.removeAll();const{id:x}=c.entities.add({position:Cesium.Cartesian3.fromDegrees(g,$),point:{pixelSize:10,color:Cesium.Color.RED}}),v={longitude:g,latitude:$,id:x};console.log("postion: ",v),n==null||n(v)}return q.jsx("div",{id:"cesium-container",className:fe["cesium-wrap"],...i})});function ye(){const s=p.useRef(null);p.useEffect(()=>{const r=s.current;r&&n(r)},[]);function n(r){const i=r.getContext("2d");r.width=800,r.height=600;const t={centerX:r.width/2,centerY:r.height/2,hexRadius:200,ballRadius:10,gravity:.5,airResistance:.99,rotationSpeed:.02,restitution:1.85,friction:.7},e={ballX:t.centerX,ballY:t.centerY-t.hexRadius+t.ballRadius+20,vx:2,vy:0,hexRotation:0};function o(u){u.beginPath();for(let l=0;l<6;l++){const d=e.hexRotation+l*Math.PI/3,a=t.centerX+t.hexRadius*Math.cos(d),c=t.centerY+t.hexRadius*Math.sin(d);l?u.lineTo(a,c):u.moveTo(a,c)}u.closePath(),u.strokeStyle="#000",u.stroke()}function f(){i&&(i.beginPath(),i.arc(e.ballX,e.ballY,t.ballRadius,0,Math.PI*2),i.fillStyle="red",i.fill())}function y(u,l){const d={x:l.x-u.x,y:l.y-u.y},a={x:e.ballX-u.x,y:e.ballY-u.y},c=Math.max(0,Math.min(1,(a.x*d.x+a.y*d.y)/(d.x**2+d.y**2))),h={x:u.x+c*d.x,y:u.y+c*d.y},m=e.ballX-h.x,g=e.ballY-h.y,$=Math.sqrt(m**2+g**2);if($>t.ballRadius)return null;let x={x:d.y,y:-d.x};const v={x:(u.x+l.x)/2,y:(u.y+l.y)/2};x.x*(v.x-t.centerX)+x.y*(v.y-t.centerY)>0&&(x={x:-x.x,y:-x.y});const j=Math.sqrt(x.x**2+x.y**2);return{normal:{x:x.x/j,y:x.y/j},overlap:t.ballRadius-$}}function M(u){const l=u.normal,d=e.vx*l.x+e.vy*l.y;e.vx=(e.vx-(1+t.restitution)*d*l.x)*t.friction,e.vy=(e.vy-(1+t.restitution)*d*l.y)*t.friction,e.ballX+=l.x*u.overlap*1.1,e.ballY+=l.y*u.overlap*1.1}function b(){if(!i)return;i.clearRect(0,0,r.width,r.height),e.hexRotation+=t.rotationSpeed,e.vy+=t.gravity,e.vx*=t.airResistance,e.vy*=t.airResistance,e.ballX+=e.vx,e.ballY+=e.vy;const u=[];for(let l=0;l<6;l++){const d=e.hexRotation+l*Math.PI/3;u.push({x:t.centerX+t.hexRadius*Math.cos(d),y:t.centerY+t.hexRadius*Math.sin(d)})}for(let l=0;l<6;l++){const d=y(u[l],u[(l+1)%6]);if(d){M(d);break}}o(i),f(),requestAnimationFrame(b)}b()}return q.jsx("canvas",{ref:s,width:800,height:600})}const $e=N.memo(ye);export{$e as C,ge as R,le as a,be as b,he as c,xe as u};
